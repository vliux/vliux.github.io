<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">By vliux.me</title>
<subtitle type="text"></subtitle>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="http://vliux.me/feed.xml" />
<link rel="alternate" type="text/html" href="http://vliux.me" />
<updated>2018-11-24T23:05:05+08:00</updated>
<id>http://vliux.me/</id>
<author>
  <name>vliux</name>
  <uri>http://vliux.me/</uri>
  <email>swordmanliuxin@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[[最后的游侠]御灵校尉]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/yulinwei/" />
  <id>http://vliux.me/drawing/yulinwei</id>
  <published>2018-11-24T15:30:00+08:00</published>
  <updated>2018-11-24T15:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;a href=&quot;/images/p/181124/l.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/181124/l.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/yulinwei/&quot;&gt;[最后的游侠]御灵校尉&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on November 24, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]Bravery_3]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/bravery_3/" />
  <id>http://vliux.me/drawing/bravery_3</id>
  <published>2018-11-12T15:30:00+08:00</published>
  <updated>2018-11-12T15:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;a href=&quot;/images/p/181112/l.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/181112/l.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/bravery_3/&quot;&gt;[最后的游侠]Bravery_3&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on November 12, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]Bravery_2]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/bravery_2/" />
  <id>http://vliux.me/drawing/bravery_2</id>
  <published>2018-11-05T15:30:00+08:00</published>
  <updated>2018-11-05T15:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;a href=&quot;/images/p/181105/l.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/181105/l.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/bravery_2/&quot;&gt;[最后的游侠]Bravery_2&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on November 05, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]勇气]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/bravery/" />
  <id>http://vliux.me/drawing/bravery</id>
  <published>2018-10-07T15:30:00+08:00</published>
  <updated>2018-10-07T15:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;“勇气是一个人处于逆境中的光明” -- 华福纳格&lt;/p&gt;
&lt;p&gt;“有德必有勇，正直的人绝不胆怯” -- 莎士比亚&lt;/p&gt;
&lt;p&gt;“勇者发怒，抽刃向更强者；...” -- 鲁迅&lt;/p&gt;

&lt;a href=&quot;/images/p/181007/l.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/181007/l.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/bravery/&quot;&gt;[最后的游侠]勇气&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on October 07, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]光明使者]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/light/" />
  <id>http://vliux.me/drawing/light</id>
  <published>2018-09-28T15:15:00+08:00</published>
  <updated>2018-09-28T15:15:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;
“此心光明，亦复何言” -- 王阳明&lt;/p&gt;
&lt;a href=&quot;/images/p/180928/f.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180928/f.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/light/&quot;&gt;[最后的游侠]光明使者&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on September 28, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]杨雨vs四手怪]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/yyssg/" />
  <id>http://vliux.me/drawing/yyssg</id>
  <published>2018-09-20T15:00:00+08:00</published>
  <updated>2018-09-20T15:00:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;a href=&quot;/images/p/180920/f.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180920/f.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/yyssg/&quot;&gt;[最后的游侠]杨雨vs四手怪&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on September 20, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]侠路漫漫]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/xialumanman/" />
  <id>http://vliux.me/drawing/xialumanman</id>
  <published>2018-09-13T18:15:00+08:00</published>
  <updated>2018-09-13T18:15:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;
&quot;&lt;br/&gt;
侠路漫漫&lt;br/&gt;
知易行难&lt;br/&gt;
知难行易&lt;br/&gt;
&quot;
&lt;/p&gt;

&lt;p&gt;
行侠仗义的路漫长又不好走。侠义这两个字说起来容易做起来很难，只有做到知行合一，才能成为真正的大侠。
&lt;/p&gt;
&lt;a href=&quot;/images/p/180913/b.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180913/b.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/xialumanman/&quot;&gt;[最后的游侠]侠路漫漫&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on September 13, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]荆固]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/jinggu/" />
  <id>http://vliux.me/drawing/jinggu</id>
  <published>2018-08-21T21:30:00+08:00</published>
  <updated>2018-08-21T21:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;JingGu is neither a decent nor negative character in the yet unknown story.
&lt;br/&gt;Pen draw by Xin Liu at Aug 2018&lt;/p&gt;

&lt;a href=&quot;/images/p/180821/1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180821/1.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/jinggu/&quot;&gt;[最后的游侠]荆固&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on August 21, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[[最后的游侠]杨雨]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/drawing/dara/" />
  <id>http://vliux.me/drawing/dara</id>
  <published>2018-08-04T18:15:00+08:00</published>
  <updated>2018-08-04T18:15:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Dara is one of the main characters in the yet unknown story.
&lt;br/&gt;Pen draw by Xin Liu at Aug 2018&lt;/p&gt;

&lt;a href=&quot;/images/p/180804/dara.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180804/dara.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/drawing/dara/&quot;&gt;[最后的游侠]杨雨&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on August 04, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[从有味道的相片说起]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/naughty-boy/" />
  <id>http://vliux.me/gallery/naughty-boy</id>
  <published>2018-07-12T14:30:00+08:00</published>
  <updated>2018-07-12T14:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;
前几日得闲，和家人翻看了Yige去年的相片。这些相片里，有在影楼拍摄的写真，也有我用便携相机和手机拍摄的生活照。虽然生活照并不完美，翻看它们时却觉得更“有味道”，这胜过了那些技术完美且符合传统美学观念的影楼写真照。不完美的相片战胜了“好”的相片，原因何在？
&lt;/p&gt;
&lt;p&gt;
时间是一个很有意思的东西。在经济学中时间作为一个自变量，影响着商品在不同时刻的价值。在生活中我们身边同时发生着许多事情，有些事情在发生的当时看来是平淡无奇，因此大脑意识层不会对它们做进一步处理。不过，大脑仍旧忠实地记录下了它们。于是，在时间的参与下，变化在不知不觉中产生了。当我们身处未来，以相片为媒介回望当初，往往会有不同的感受。人是会随着时间成长的，一些事情在发生的时刻，由于我们的阅历、能力有限，由于社会价值观的限制，不一定能理解到它们的意义；当我们若干年后回看相片时，脑中的回忆被唤醒，在不同的环境下，在不同的时间点下，我们品味出了不同的滋味。这是相片的魅力，这是时间的魅力。
&lt;/p&gt;

&lt;a href=&quot;/images/p/180712/c.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180712/c.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 时间的操控者&lt;/p&gt;

&lt;p&gt;
毋容置疑，便携相机和手机的光学性能远不及硕大的专业器材，却在抓拍能力上胜出。更多的抓拍时机让这些相片更具现场的“沉浸感”，而专业设备由于体积和操作方式的限制，其出片更有一种第三方立场的陈述感。不是说专业设备不好，而是在我们谈论的这个当下，生活化的相片更有味道。
&lt;/p&gt;

&lt;a href=&quot;/images/p/180712/1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180712/1.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 好大一顶帽子！Yige正好把一顶帽子扔向了镜头。近大远小的透视关系使得帽子看起来比人还大。&lt;/p&gt;

&lt;p&gt;
现在，我仍然会欣赏和追求精巧的构图、完美的影调和色彩。一张相片，如果在剔除了这些因素之后，还有其他打动人心的地方，那这就是完美的相片。如果这些因素不可兼得，那么，我将追求一种有味道的相片。
&lt;/p&gt;

&lt;a href=&quot;/images/p/180712/2.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180712/2.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 霹雳舞 or 太空舞？&lt;/p&gt;

&lt;a href=&quot;/images/p/180712/3.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180712/3.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 充满能量的“嚎叫”&lt;/p&gt;

&lt;a href=&quot;/images/p/180712/4.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180712/4.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 手&lt;/p&gt;

&lt;a href=&quot;/images/p/180712/5.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180712/5.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 太空舱里的舞步&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/naughty-boy/&quot;&gt;从有味道的相片说起&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on July 12, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[令人心悸的小儿高热和病毒疹]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/son-fever/" />
  <id>http://vliux.me/gallery/son-fever</id>
  <published>2018-07-05T21:30:00+08:00</published>
  <updated>2018-07-05T21:30:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;
6月17日至29日，Yige被未知病毒感染继而引发了超过40度的高热和全身斑丘疹。期间带去省内最大的儿童医院检查3次却得不到任何结果，其中包括一次专家做出的误诊。抱着怀疑我们做了很多功课，选择了现在看来正确的治疗方案。最后的临门一脚，在私人诊所的耐心指导下，Yige终于痊愈。希望此文能帮助宝宝有相似症状的家长们。
&lt;/p&gt;
&lt;p&gt;
先说说最有价值的总结，详细病程请见文尾：
&lt;ul&gt;
&lt;li&gt;Yige没有任何川崎病的典型症状，儿保的专家却要进行相关检查（有副作用），让人非常困惑。所以家长平时要多做功课，掌握一些小儿常见病的知识。不仅能帮助医生治疗，也能对医生的诊断有个基本的判断。&lt;/li&gt;

&lt;li&gt;对于大医院和专家的技术能力不迷信。比如这次的神秘病毒感染，目前仅学界发现的能导致类似症状的病毒就有100多种，再大的医院也没有这个资源和能力查出罪魁祸首。&lt;/li&gt;

&lt;li&gt;医生做诊断和治疗的方案，也是在合法的范围内，对患者有益和对自己有利益的两个因素下进行平衡的。 在没有市场化的公立医院体系内，医生的诊费长期被压制，因此更有倾向开出过量的检查单和药物。 &lt;/li&gt;

&lt;li&gt;对于一些常见且非重急病，可以考虑靠谱的私人诊所。大医院的医生，面对一个患者只有1-2分钟的诊断时间，仓促下的诊断难以保证正确性。另一方面，大医院病人太多很容易发生交叉感染，且就诊等待时间太长。好的私人诊所在这些方面上完胜。我们就诊的诊所另外提供7天内微信咨询，对需要持续追踪病情发展的治疗非常有帮助。&lt;/li&gt;
&lt;ul&gt;
&lt;/p&gt;

&lt;a href=&quot;/images/p/180705/1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180705/1.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 20日，在退烧药的药效期Yige精神尚可。&lt;/p&gt;

&lt;a href=&quot;/images/p/180705/2.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180705/2.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 出疹的第二天，疹子蔓延到全身。从儿保回来躺在妈妈怀里吃奶。&lt;/p&gt;

&lt;a href=&quot;/images/p/180705/3.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180705/3.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 24日，开始退烧，但可以看出经过多日折腾Yige的精神有点焉。&lt;/p&gt;

&lt;a href=&quot;/images/p/180705/4.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180705/4.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 25日，脸部和躯干的疹已退，手足的尚在。&lt;/p&gt;

&lt;p&gt;病程：
&lt;ul&gt;
&lt;li&gt;6月17日，Yige体温开始升高，超过38.5度，开始服用退烧药。
&lt;li&gt;19日，体温创下了新高的40度。立刻送去儿保。医生判断为病毒类感染，让回去观察3天。（第一次去儿保）
&lt;li&gt;21日，高烧不退，体温在39.5~40之间徘徊，腿部开始出现丘疹。再送儿保，再次验血，医生还是只能诊断为病毒类感染，只开了点抗过敏药。（第二次去儿保）
&lt;li&gt;22日，Yige全身出现斑丘疹，以脸部和躯干最明显，体温照旧。所幸精神食欲尚可。
&lt;li&gt;23日，斑丘疹进一步蔓延至手足部分（和21日出现的丘疹似乎不是一种疹子）。第三次去儿保，儿保人山人海。这次花了重金挂了专家号，可是专家表示难以确定病因，同时需要排除川崎病的可能（Yige需要服用镇静剂来做心脏B超）。由于医院排队太长，B超预约到了下午，因此先带宝宝回家吃饭休息。经过一下午的功课，我和孩子妈妈判断Yige患川崎的概率较低，暂时不去医院做检查，避开医院的交叉感染。
&lt;li&gt;24日，发热似乎有所好转，吃退烧药的间隔开始拉长。
&lt;li&gt;25日，疹子开始消退，先从脸部和躯干开始消退。
&lt;li&gt;2x日，病毒疹消退缓慢...&lt;/li&gt;
&lt;li&gt;29日，手足末端的疹子还是没有完全消退。同时前一天面部和躯干再次出现风团样皮疹，晚上Yige瘙痒难耐。由于对儿保已丧失信心，选择了朋友推荐的dx诊所就医。
诊所的医生在耐心了解了病情后诊断为荨麻疹，和之前病毒感染引起的免疫系统异常有关，并开了抗过敏药。
&lt;li&gt;在吃了医生开具的药后两天，疹子慢慢完全消失。&lt;/li&gt;
&lt;/ul&gt;&lt;/p&gt;
  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/son-fever/&quot;&gt;令人心悸的小儿高热和病毒疹&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on July 05, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[摄影漫画 - 小需求]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/comics-sreq/" />
  <id>http://vliux.me/gallery/comics-sreq</id>
  <published>2018-07-04T15:00:00+08:00</published>
  <updated>2018-07-04T15:00:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/** 
 * package me.vliux.photography
 * @author vliux.me
 * 
 * 背景知识
 * 现代软件工程的复杂度越来越高。特别是对于架构不良的软件，很多看似很简单的小改动，
 * 对系统的影响就会像涟漪一样扩散开去，最终结果无法控制。
 * 
 * 造成这种情况的根源也可能来自于：
 * - 软件需求就没有搞清
 * - 设计时对软件未来需求的变化估计不足
 * - 开发和维护时对过程的管理不够
 * 
 * Background
 * Modern software is complex. For any SW not properly designed, 
 * even tiny changes may affect the stability of whole system.
 * 
 * The root causes may also include:
 * - the requirements are not clear
 * - didn't evaluate the possible future changes in design time
 * - lack of process management in development or maintenance
 */&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;a href=&quot;/images/p/180704/1.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180704/1.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ &quot;Tiny requirement, piece of cake, I should make it done in 5 min&quot;&lt;/p&gt;

&lt;a href=&quot;/images/p/180704/2.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180704/2.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ 30 min later ...&lt;/p&gt;

&lt;a href=&quot;/images/p/180704/3.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180704/3.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ &quot;There are errors everywhere ...!?&quot;&lt;/p&gt;

&lt;a href=&quot;/images/p/180704/4.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/180704/4.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;
&lt;p&gt;↑ &quot;Dear boss, shall we delay the requirement to the next milestone?&quot;&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/comics-sreq/&quot;&gt;摄影漫画 - 小需求&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on July 04, 2018.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[八卦田的夏天]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/summer_baguatian/" />
  <id>http://vliux.me/gallery/summer_baguatian</id>
  <published>2017-09-10T14:45:00+08:00</published>
  <updated>2017-09-10T14:45:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;办公室坐落在景区里 -- 背靠凤凰山，面朝八卦田。&lt;/p&gt;
&lt;p&gt;&lt;font color=&quot;green&quot;&gt;照片全部来自Google Nexus 6P手机。&lt;/font&gt;&lt;/p&gt;

&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/s_bagua/101.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/s_bagua/101.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;去公司报到的那天，田里的包菜开的正欢，高耸的菜叶好似裙摆。&lt;/p&gt;

&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/s_bagua/102.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/s_bagua/102.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;随之而来的就是漫长的梅雨季。&lt;/p&gt;

&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/s_bagua/104.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/s_bagua/104.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;雨天出游更有感觉。&lt;/p&gt;

&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/s_bagua/103.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/s_bagua/103.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;5月底，雨季的间歇，农忙。&lt;/p&gt;

&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/s_bagua/105.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/s_bagua/105.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;向日葵和孩童。&lt;/p&gt;

&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/s_bagua/100.jpg&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/images/p/s_bagua/100.jpg&quot; alt=&quot;GIMG&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;6月绽放的向日葵，预示着炎热夏季的临近。&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/summer_baguatian/&quot;&gt;八卦田的夏天&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on September 10, 2017.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[杭州Hangzhou]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/hangzhou/" />
  <id>http://vliux.me/gallery/hangzhou</id>
  <published>2017-04-10T18:03:00+08:00</published>
  <updated>2017-04-10T18:03:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;我出生在这里。除了求学、北漂的五个春秋，我也一直生活在她怀里。&lt;/p&gt;
&lt;p&gt;她的美，缺少那种磅礴的大气。因此横构图里的她，总是有点平淡。如果使用竖构图，再把镜头拉近，却能在每个角落里给我感动。&lt;/p&gt;

&lt;p&gt;西湖(下图)是最有名的景点。因此，好天气的时候，游客非常多。再加上稍显过多的人为装饰，使得它总有些杂乱和造作的感觉。在雨雪天，游客稀少的日子里，倒更有一番韵味。&lt;/p&gt;
&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-1974.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-1974.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-02977.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-02977.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p/&gt;
&lt;p&gt;通往灵隐的路叫“九里松”。路两边全是高耸入云的松树、水杉和樟树(下左图）。灵隐寺坐落在飞来峰景区，相比景区内其他几座寺庙，显得更为气派。但它过大的知名度导致游客数量很多。
如果只想安静地走一走，或赶早到达寺中，或不妨试试边上的永福寺(下图右)。&lt;/p&gt;
&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-1273.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-1273.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-1351.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-1351.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p/&gt;
&lt;p&gt;浙江大学玉泉校区新桥门附近（下图左）的流水和秋天的黄叶搭配很美。河水从学校边上的山上流下来，绕着校园东边而过。&lt;/p&gt;
&lt;p&gt;西溪湿地(下图右)作为城市的“肺”，它的景是纯天然的。因此缺乏人工景观的那种有序感，更需要摄影师耐心发掘。&lt;/p&gt;
&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-03177.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-03177.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-2421.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-2421.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p/&gt;
&lt;p&gt;虎跑(下图左)虽然很小，对摄影师来说却相当高产。它是杭州之美的一个典型代表：一个小小的、安静怡和的世外桃源。这不正是每个人心中那片安宁的一亩三分地嘛？&lt;/p&gt;
&lt;p&gt;我现在生活在钱塘江边(下图右)。江水在大多数时候都波澜不惊，显得相当平淡。但每个月的农历18，海水回灌江中，掀起巨浪，蔚为壮观。只是我一直都没有办法拍出一张满意的照片。&lt;/p&gt;
&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-2305.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-2305.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/hz/vliux_hz-02363.jpg&quot;&gt;&lt;img src=&quot;/images/p/hz/vliux_hz-02363.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/hangzhou/&quot;&gt;杭州Hangzhou&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on April 10, 2017.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[布拉格Prague]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/prague/" />
  <id>http://vliux.me/gallery/prague</id>
  <published>2017-04-09T22:56:00+08:00</published>
  <updated>2017-04-09T22:56:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-01790.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-01790.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-01795.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-01795.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-3334.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-3334.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-3109.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-3109.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-3603.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-3603.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-3077.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-3077.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-3339.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-3339.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/prague/vliux_prague_201607-3505.jpg&quot;&gt;&lt;img src=&quot;/images/p/prague/vliux_prague_201607-3505.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/prague/&quot;&gt;布拉格Prague&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on April 09, 2017.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[钱塘江日落]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/qtj-sunset/" />
  <id>http://vliux.me/gallery/qtj-sunset</id>
  <published>2017-03-20T18:33:00+08:00</published>
  <updated>2017-03-20T18:33:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-03492.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-03492.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-02874.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-02874.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-02437.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-02437.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-02432.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-02432.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-03427.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-03427.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-1.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-1.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-04477.jpg&quot;&gt;&lt;img src=&quot;/images/p/qtj-sunset/vliux_qtj_sunset_2017-04477.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;



  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/qtj-sunset/&quot;&gt;钱塘江日落&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on March 20, 2017.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[花落花起]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/flower-life/" />
  <id>http://vliux.me/gallery/flower-life</id>
  <published>2017-03-20T17:59:00+08:00</published>
  <updated>2017-03-20T17:59:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/flower-life/vliux_flower_life_2017-3266.jpg&quot;&gt;&lt;img src=&quot;/images/p/flower-life/vliux_flower_life_2017-3266.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/flower-life/vliux_flower_life_2017-3295.jpg&quot;&gt;&lt;img src=&quot;/images/p/flower-life/vliux_flower_life_2017-3295.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/p/flower-life/vliux_flower_life_2017-3223.jpg&quot;&gt;&lt;img src=&quot;/images/p/flower-life/vliux_flower_life_2017-3223.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&amp;nbsp;&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;a href=&quot;/images/p/flower-life/vliux_flower_life_2017-3327.jpg&quot;&gt;&lt;img src=&quot;/images/p/flower-life/vliux_flower_life_2017-3327.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;


  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/flower-life/&quot;&gt;花落花起&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on March 20, 2017.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[雨后静物]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/gallery/macro-static/" />
  <id>http://vliux.me/gallery/macro-static</id>
  <published>2017-03-17T15:54:00+08:00</published>
  <updated>2017-03-17T15:54:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">&lt;div class=&quot;divTable&quot; style=&quot;width: 100%;&quot; &gt;
&lt;div class=&quot;divTableBody&quot;&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/gallery/macro/vliux_macro_2017-0549.jpg&quot;&gt;&lt;img src=&quot;/images/gallery/macro/vliux_macro_2017-0549.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/gallery/macro/vliux_macro_2017-0564.jpg&quot;&gt;&lt;img src=&quot;/images/gallery/macro/vliux_macro_2017-0564.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/gallery/macro/vliux_macro_2017-4143.jpg&quot;&gt;&lt;img src=&quot;/images/gallery/macro/vliux_macro_2017-4143.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/gallery/macro/vliux_macro_2017-4169.jpg&quot;&gt;&lt;img src=&quot;/images/gallery/macro/vliux_macro_2017-4169.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;divTableRow&quot;&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/gallery/macro/vliux_macro_2017-4346.jpg&quot;&gt;&lt;img src=&quot;/images/gallery/macro/vliux_macro_2017-4346.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;divTableCell&quot;&gt;&lt;a href=&quot;/images/gallery/macro/vliux_macro_2017-4366.jpg&quot;&gt;&lt;img src=&quot;/images/gallery/macro/vliux_macro_2017-4366.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;



  &lt;p&gt;&lt;a href=&quot;http://vliux.me/gallery/macro-static/&quot;&gt;雨后静物&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on March 17, 2017.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Gradle DSL from developer perspective]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/blog,/gradle/gradle-dsl-dev-perspective/" />
  <id>http://vliux.me/blog,/gradle/gradle-dsl-dev-perspective</id>
  <published>2016-03-26T13:47:00+08:00</published>
  <updated>2016-03-26T13:47:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">Gradle is the official build tool for Android. Compared with Maven, it’s more dynamic so developers can easily define their customized building logics.

It could easy for anyone to be lost in the new Gradle world --- DSK, task re-ordering/injection, incremental build, Gradle demo --- there are a lot for new features and concepts to learn. From an Android developer's point of view, understanding the configuration language of Gradle is the most important. So let's take a deep look into Gradle DSL.
&lt;p&gt;

The Gradle system can be divided into two structural parts: Gradle runtime and Gradle plugins. Gradle runtime is the libs and executables inside the Gradle installation dir (also the Gradlew scripts and the libs inside gradle/wrapper folder if you are using a Gradle wrapper). Runtime works as a low-level service which start up the build system and reads the configuration files (build.gradle, settings.gradle). It also loads plugins mentioned in the configuration files. The concrete build logic of tasks are mostly defined by plugins. For Android, the logic of how to build an apk/aar is declared inside the Google android plugin.  
&lt;p&gt;

Every Android developer could already know the content of build.gradle and settings.gradle under your project. In this article we call the set of Gradle configration files &quot;Gradle DSL&quot;. There are multiple confiugrations like dependencies, android, publish etc. The configuration language of Gradle is Groovy. The below configuration will be used thoroughly in this article:
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;apply&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;plugin:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;buildscript&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;repositories&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mavenLocal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;maven&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://somewhere.com/mvn/repository&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;classpath&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;gradle:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;android&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;compileSdkVersion&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;buildToolsVersion&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;23.0.2&quot;&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;sourceSets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mainifest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;srcFile&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;AndroidManifest.xml&quot;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;srcDirs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;aidl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;srcDirs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;srcDirs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;assets&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;srcDirs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;assets&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3&gt;How does Gradle plugin loaded? Where the configuration block &quot;android&quot; is defined?&lt;/h3&gt;
The &quot;apply&quot; in the 1st line specifies the name of plugin to be loaded. The &quot;buildscript&quot; block (line 7-15) specifies the repository to fine the plugin jar file.
In our example we define two repositories: local Maven repo and a public Maven repo. The &quot;classpath&quot; line (line 13) specifies the GAV coordinate for the plugin: group=com.android.tools.build, artifact=gradle, version=1.3.1. With GAV, Gradle runtime could locate and download the plugin artifact from Maven repository.

By extracting gradle-1.3.1.jar, we can find there are plenty of .properties files inside --- one of them (file name: com.android.library.properties) defines the implementation class of plugin 'com.android.library':
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;implementation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;LibraryPlugin&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

Gradle runtime will load the class and execute the menthod apply(Project). The core logic of LibraryPlugin.apply() is at its supper class, which is com.android.build.gradle.BasePlugin.apply():
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Project&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;SpanRecorders&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ExecutionType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BASE_PLUGIN_PROJECT_BASE_EXTENSTION_CREATION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;createExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;SpanRecorders&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ExecutionType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;BASE_PLUGIN_PROJECT_TASKS_CREATION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;createTasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

We take a deep look into the method createExtension(). Extension is a conception in Gradle. In fact, one extension defines how a configuration block in DSL is parsed. The implementation of createExtension() is like following:
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getExtensionClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProjectInternal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instantiator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;androidBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sdkHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;buildTypeContainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;productFlavorContainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signingConfigContainer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;extraModelInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isLibrary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

The first parameter &quot;android&quot; of project.extensions.create() is relate to the configuration block with the same name in Gradle DSL. Here the plugin links the String &quot;android&quot; in DSL to a class returned from getExtensionClass(), which is the second parameter of project.extensions.create(). LibraryPlugin.getExtensionClass() is as follows:
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BaseExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getExtensionClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LibraryExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

So far, &quot;android&quot; in DSL is mapped to Extension class com.android.build.gradle.LibraryExtension. When Gradle reads every sub-configuration entry in &quot;android{}&quot;, it tries to locate the related field or method in LibraryExtension class.

&lt;h3&gt;How configuration entries like &quot;compileSdkVersion&quot; works?&lt;/h3&gt;
When I was a newbie in the Gradle world, the only way to know the configuration entries are by reading Gradle documents. However, documents are far from perfect so it's not easy to know how to config all the entries. Frankly speaking, if you get to know a little bit how Gradle plugin works, you can query all the configration entries available by reading a little code.

Let's fall back to the previous sample. com.android.build.gradle.LibraryExtension derives from BaseExtension. Take a look at the definition of BaseExtension:
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSdkVersion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;checkWritability&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compileSdkVersion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;apiLevel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;compileSdkVersion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android-&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;apiLevel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

In fact, the line &quot;compileSdkVersion 23&quot; in DSL, maps to the invokation of method BaseExtension.compileSdkVersion(int). For every configuration name &quot;abcd&quot;, Gradle tries to set the value in the related Extension class:
- abcd() method
- setAbcd() method
- field abcd
So you can also config it like &quot;compileSdkVersion 'android-23'&quot;. After the version of SDK is set, Gradle will generate the path to the build-tools. You could also see there are bunch of other properties defined in BaseExtension like: useLibrary(String), buildTypes(Action), manifestOptions(Action), signingConfigs(Action) --- they are all related to the entries in DSL.

&lt;h3&gt;About the dynamic&lt;/h3&gt;
The mechanism of loading configurations is a kind of static way --- Gradle reads DSL and set related properties. But the power of Gradle is far more than this. For example, we can insert any code at the begining and end of a task:
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;whenTaskAdded&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;startsWith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;“&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;”&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;endsWith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Assets&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;doLast&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buildType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;signingConfigs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buildType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getSignOnline&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()){&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;apache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;commons&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;FileUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;copyFileToDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;env/assets.release/SE.bin&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;outputDir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;apache&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;commons&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;FileUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;copyFileToDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;env/assets.debug/SE.bin&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;outputDir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

Here we insert a copying logic at the end of tasks whose name starts with &quot;merge&quot; and ends with &quot;Assets&quot;. In the example the file SE.bin is copied to the output folder of take mergeXXXAssets, so it will be included in the assets folder of apk. 
&quot;afterEvaluate {}&quot; could also implement the same effect:
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;n&quot;&gt;afterEvaluate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// set parameter for dex task: —-multi-dex和—main-dex-list&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;matching&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dexDebug&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;additionalParameters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;additionalParameters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dex&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;--main-dex-list=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mianDexFilePath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;additionalParameters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dex&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;additionalParameters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;--main-dex-list=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mianDexFilePath&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

The delegate object of &quot;afterEvaluate&quot; is the object of Project, as it is defined in the top level of DSL. It's a shortcut syntax, which is the same as &quot;project.afterEvaluate{}&quot;. If it is written inside a task, the default delegate is the task object. As there is no method nor field named &quot;afterEvaluate&quot;, Gradle will report the error.

&lt;h3&gt;Summary&lt;/h3&gt;
I hope you understand the essential of Gradle DSL is the mappings to Extension classes, which are loaded through Gradle plugins. Gradle is initially designed to provide a powerful way to extend the build logic through such mechanism. Indeed it's much agile than XML by Maven. However, with this mechanism the learning curve is much sharp than other build tools, especially at start time.

  &lt;p&gt;&lt;a href=&quot;http://vliux.me/blog,/gradle/gradle-dsl-dev-perspective/&quot;&gt;Gradle DSL from developer perspective&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on March 26, 2016.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Avoid Runtime.exec in UI thread]]></title>
  <link rel="alternate" type="text/html" href="http://vliux.me/blog,/android/process/ui/avoid-exec-in-ui-thread/" />
  <id>http://vliux.me/blog,/android/process/ui/avoid-exec-in-ui-thread</id>
  <published>2015-09-24T03:49:00+08:00</published>
  <updated>2015-09-24T03:49:00+08:00</updated>
  <author>
    <name>vliux</name>
    <uri>http://vliux.me</uri>
    <email>swordmanliuxin@gmail.com</email>
  </author>
  <content type="html">Several days ago I saw a ANR during monkey test. The ANR trace looked like this.
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;s&quot;&gt;&quot;main&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MONITOR&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:~&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;206&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;waiting&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x410bc8b0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;util&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;held&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;176&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ProcessBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProcessBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;195&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;&quot;Thread-176&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NATIVE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Native&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;209&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;168&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

At the exact moment of ANR, Thread-176 was executing a shell command with Runtime.getRuntime.exec(), which entered the lock section in ProcessManager.exec().
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Process&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;taintedCommand&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;taintedEnvironment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;workingDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redirectErrorStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Ensure onExit() doesn't access the process map before we add our entry.&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;processReferences&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;processReferences&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;processReference&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;cm&quot;&gt;/*
             * This will wake up the child monitor thread in case there
             * weren't previously any children to wait on.
             */&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;processReferences&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;notifyAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

So when our Main thread tried to execute a command later, it's blocked for a long time which caused the ANR. The &quot;processReferences&quot; is a HashMap which records the exit value of each child process. When ProcessManager is initialized, it creates a Thread which checks the status of every child in an infinite loop. When the status of one child process is exited or signaled, it will set the exit value accordingly.
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Spawn a thread to listen for signals from child processes.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reaperThread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProcessManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;watchChildren&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

The case is clear. We should prevent calling any method which takes a lock. With lock involved, you won't know how long your UI thread will wait before other threads release the lock. Runtime.exec() should be invoked asynchronously instead. If your UI relies on the result of exec(), place it at a earlier stage and cache it for later reference. In some extreme case, use NDK to fork the process.


  &lt;p&gt;&lt;a href=&quot;http://vliux.me/blog,/android/process/ui/avoid-exec-in-ui-thread/&quot;&gt;Avoid Runtime.exec in UI thread&lt;/a&gt; was originally published by vliux at &lt;a href=&quot;http://vliux.me&quot;&gt;By vliux.me&lt;/a&gt; on September 24, 2015.&lt;/p&gt;</content>
</entry>

</feed>